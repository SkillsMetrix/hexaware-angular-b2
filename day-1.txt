import { Component } from '@angular/core';
import { FormControl, FormGroup, Validators } from '@angular/forms';
 import { UserformserviceService } from '../../shared/userformservice.service';

@Component({
  selector: 'app-dd',
  templateUrl: './dd.component.html',
  styleUrl: './dd.component.css'
})
export class DdComponent {

  myForm!:FormGroup
  uname!: FormControl
  pass!: FormControl
  email!: FormControl
  city!: FormControl

  createForm(){
    this.myForm= new FormGroup({
      uname:this.uname,
      pass: this.pass,
      email:this.email,
      city:this.city
    })
  }
  createFormControl(){
    this.uname= new FormControl('',Validators.required)
        this.pass= new FormControl('',[Validators.required,Validators.minLength(6)])
            this.email= new FormControl('',[this.emailDomainValidator])
                this.city= new FormControl('')
  }
constructor(private us:UserformserviceService){
  this.createFormControl()
  this.createForm()
}
  addUser(){
     
    this.us.addUserToDB(this.myForm.value)
    
  }

  emailDomainValidator(control:FormControl){
    let email= control.value
    if(email && email.indexOf('@') !=-1){
      let [before,domain]= email.split('@')
      if(domain !='hexaware.com'){
        return {
          emailDomain:{
            pd:domain
          }
        }
      }
    }
    return null
  }

}
------
<div id="uform">

  <mat-card style="width: 350px; padding: 20px;">
    <mat-card-header>
      <mat-card-title>User Registration Form</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form (ngSubmit)="addUser()" [formGroup]="myForm">
        <mat-form-field appearance="outline">
          <mat-label>UserName</mat-label>
          <input matInput type="text" formControlName="uname"/>

          <mat-error *ngIf="uname.invalid && (uname.dirty || uname.touched)">
            <div *ngIf="uname.errors?.['required']">UserName cant be empty</div>
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Password</mat-label>
          <input matInput type="password" formControlName="pass" />

          <mat-error *ngIf="pass.invalid && (pass.dirty || pass.touched)">

            <div *ngIf="pass.errors?.['required']"> Field cant be Empty</div>
            <div *ngIf="pass.errors?.['minlength']"> password must be 6 char long</div>

          </mat-error>
        </mat-form-field>

        <mat-form-field>
          <mat-label>Email</mat-label>
          <input matInput type="email" formControlName="email" />
          <mat-error *ngIf="email.invalid && (email.dirty || email.touched)">

            <div *ngIf="email.errors?.['required']"> Field cant be Empty</div>
            <div *ngIf="email.errors?.['emailDomain']">Email must be hexaware.com</div>

          </mat-error>
        </mat-form-field>
        <mat-form-field>
          <mat-label>City</mat-label>
          <input matInput type="text" formControlName="city"/>
        </mat-form-field>
        <button [disabled]="myForm.invalid" mat-raised-button color="primary">Register</button>


      </form>
    </mat-card-content>
  </mat-card>





</div>
